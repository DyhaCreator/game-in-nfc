<canvas id="c"></canvas><br><button onclick="d=2"><<button onclick="d=0">^<button onclick="d=1">V<button onclick="d=3">><script>c=document.getElementById('c'),t=c.getContext('2d'),s=100,c.width=s,c.height=s,x=[10],y=[10],d=0,X=(r=()=>Math.floor(Math.random()*s/5))(),Y=r(),F=(z,w,q)=>{t.fillRect(z*q,w*q,q,q)},i=setInterval(()=>{t.fillStyle='tan';F(0,0,s);x.unshift(d==0?x[0]:d==1?x[0]:d==2?x[0]-1:x[0]+1);y.unshift(d==0?y[0]-1:d==1?y[0]+1:d==2?y[0]:y[0]);(x[0]==X&&y[0]==Y)?(X=r(),Y=r()):(x.pop(),y.pop());j=0;while(j<y.length){t.fillStyle='red';(x[0]<0||y[0]<0||x[0]>s/5||y[0]>s/5)||(j>0&&x[0]==x[j]&&y[0]==y[j])?clearInterval(i):0;F(x[j],y[j],5);j++}F(X,Y,5)},500)</script>